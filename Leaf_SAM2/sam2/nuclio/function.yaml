metadata:
  name: pth-facebookresearch-sam2-hiera-tiny
  namespace: cvat
  annotations:
    name: Segment Anything 2.1
    type: detector
    spec: |
      [
        { "id": 0, "name": "Spinacia", "type": "polygon" }
      ]

spec:
  description: segmentation with Segment-Anything 2.1
  runtime: 'python:3.10'
  handler: main:handler
  eventTimeout: 300s
  env:
    - name: PYTHONPATH
      value: /opt/nuclio/sam2

  build:
    image: cvat.pth.facebookresearch.sam2.hiera_tiny
    baseImage: tranhung1210/cvat-sam2-tiny:v2

  triggers:
    myHttpTrigger:
      numWorkers: 2
      kind: 'http'
      workerAvailabilityTimeoutMilliseconds: 10000
      attributes:
        maxRequestBodySize: 33554432

  platform:
    attributes:
      restartPolicy:
        name: always
        maximumRetryCount: 3
      mountMode: volume